<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Components - Bevy Tutorial - 2D Space Combat</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="chapter_1.html"><strong aria-hidden="true">1.</strong> Project Initialization</a></li><li class="chapter-item expanded "><a href="chapter_2.html" class="active"><strong aria-hidden="true">2.</strong> Components</a></li><li class="chapter-item expanded "><a href="chapter_3.html"><strong aria-hidden="true">3.</strong> Bundles</a></li><li class="chapter-item expanded "><a href="chapter_4.html"><strong aria-hidden="true">4.</strong> Startup Systems</a></li><li class="chapter-item expanded "><a href="chapter_5.html"><strong aria-hidden="true">5.</strong> Runtime Systems</a></li><li class="chapter-item expanded "><a href="chapter_6.html"><strong aria-hidden="true">6.</strong> Next Steps</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Bevy Tutorial - 2D Space Combat</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="components"><a class="header" href="#components">Components</a></h1>
<h2 id="what-is-a-component"><a class="header" href="#what-is-a-component">What is a Component</a></h2>
<p>According to <a href="http://t-machine.org/index.php/2007/11/11/entity-systems-are-the-future-of-mmog-development-part-2/">Adam Martin</a>, a component is the raw data for one aspect
of an object, and how it interacts with the world. An entity is made up of
this raw data and can be made of multiple components. A few examples he listed
for a Bicycle component are the following:</p>
<ul>
<li>Material</li>
<li>Usable by humans</li>
<li>Means of transportation</li>
<li>Can be bought and sold</li>
<li>A potential present</li>
<li>Man-made</li>
</ul>
<h2 id="our-first-component---health"><a class="header" href="#our-first-component---health">Our First Component - Health</a></h2>
<p>We are going to start a little bit simpler with our first component.
Each player and each flying asteroid will have their own health. When the
health reaches zero, that entity will die. To make a component for this we
will use an integer to represent the health value. A component is created by
first putting <code>#[derive(Component)]</code> on a line and beneath it creating a
struct that is the component.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct Health {
    hp: u64,
}
</code></pre>
<p>Each health component will have an hp attribute that stores the amount of
hit points that an entity has.</p>
<h2 id="position"><a class="header" href="#position">Position</a></h2>
<p>A commonly used comopnent for entities is the position. This will be represented
by the x and y axis positions. In Bevy, the origin (x=0, y=0) is located at
the center of the window.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct Position {
    x: f32,
    y: f32,
}
</code></pre>
<h2 id="velocity"><a class="header" href="#velocity">Velocity</a></h2>
<p>Entities that are moving in space have a velocity. This component is used to
store the velocity of the entity. We also are introducing an implementation here
to our Velocity struct. This implementation is used to accelerate the velocity.
This will be used when a player presses the accelerate button on their keyboard.</p>
<p>We also are introducing a constant here, <code>MAX_SPEED</code>. This is a global
constant that is used to set the maximum velocity for any entity.</p>
<pre><code class="language-rust  noplayground">const MAX_SPEED: f32 = 100.;

#[derive(Component)]
struct Velocity {
    x_vel: f32,
    y_vel: f32,
}
impl Velocity {
    fn accelerate(&amp;mut self, direction: f32) {
        self.x_vel = self.x_vel + direction.cos();
        self.y_vel = self.y_vel + direction.sin();
        let squares: f32 = self.x_vel * self.x_vel + self.y_vel * self.y_vel;

        if squares &gt; MAX_SPEED * MAX_SPEED {
            let current_speed: f32 = squares.sqrt();
            self.x_vel *= MAX_SPEED / current_speed;
            self.y_vel *= MAX_SPEED / current_speed;
        }
    }
}
</code></pre>
<h2 id="direction"><a class="header" href="#direction">Direction</a></h2>
<p>Similarly to the component above, Velocity, Direction is another important
parameter to the movement system we are creating for the game. The angle
is measured in radians and is used to determine the direction that a ship
is facing. This is important for accelerating and when the player shoots
their lasers. This component contains two implementations for turning.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct Direction {
    angle: f32,
}
impl Direction {
    fn rotate_right(&amp;mut self) {
        self.angle -= TURN_FACTOR * 0.01;
        if self.angle &gt;= 2. * PI {
            self.angle -= 2. * PI
        }
    }
    fn rotate_left(&amp;mut self) {
        self.angle += TURN_FACTOR * 0.01;
        if self.angle &lt; 0. {
            self.angle += 2. * PI
        }
    }
}
</code></pre>
<h2 id="damage"><a class="header" href="#damage">Damage</a></h2>
<p>The Damage component represents the amount of damage that an entity will
inflict on an entity that has Health upon collision. An example of the use for
this would be when a laser collides into an asteroid or when an asteroid collides
into a player. A laser would have a significantly smaller damage value than an
asteroid would.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct Damage {
    damage: u64,
}
</code></pre>
<h2 id="projectile-timer"><a class="header" href="#projectile-timer">Projectile Timer</a></h2>
<p>The Projectile Timer component is specifically used for lasers shot by the
player. This component creates a timer and determines when the laser entity
should no longer be present on the screen. This is used to prevent lasers
from spawning and existing infinitely until contact. After a timer has elapsed,
we will know when to de-spawn our laser entities.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct ProjectileTimer {
    timer: Timer,
    elapsed: bool,
}
</code></pre>
<h2 id="human"><a class="header" href="#human">Human</a></h2>
<p>The final component we are creating for this tutorial is a Human component.
This is used to show if a human player is controlling an object or not. The
use for this would be to have the future controlling systems only allow for the
player to control their ship entity.</p>
<pre><code class="language-rust  noplayground">#[derive(Component)]
struct Human {
    is_human: bool,
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="chapter_1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="chapter_3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="chapter_1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="chapter_3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
